{% extends "base_generic.html" %}

{% block content %}

<div class="row">
  <div class="col-md-3">
    <h1>Book List</h1>
  </div>
  <div class="col-md-9">
    <form class="navbar navbar-expand navbar-dark flex-column" action="" method="get">
      <div class="row">
        <div class="col-md-8">
          <input type="text" size="40" name="q" value="{{q}}" autofocus>
          {% if admin %}
          <input type="hidden" name="del" value="y">
          {% endif %}
        </div>
        <div class="col-md-3">
          <input type="submit" value="Search">
        </div>
    </form>
  </div>
</div>
{% if book_list %}
<ul>
  <table class="table table-hover">
    <thead>
      <tr>
        <td>Book Name</td>
        <td>Genre</td>
        <td>Language</td>
        <td>Summary</td>
        <td>Author</td>
        {% if perms.catalog.can_mark_returned and admin %}
        <td>Operate</td>
        {% endif %}
      </tr>
    </thead>
    {% for book in book_list %}
    <tr>
      <td><a href="{{ book.get_absolute_url }}">{{ book.title }}</a></td>
      <td>{{ book.display_genre }}</td>
      <td>{{ book.language }}</td>
      <td>{{ book.summary | truncatewords:10 }}</td>
      <td>{{book.author}}</td>

      {% if book.deleted_at %}
      <td>
        <a href="{% url 'restore' book.id %}?obj=book">
          <font size="-1">Restore</font>
        </a>
        &nbsp; &nbsp; &nbsp; <a href="{% url 'book_delete' book.id %}">
          <font size="-1">Destroy</font>
        </a>
      </td>
      {% endif %}

    </tr>
    {% endfor %}
  </table>
</ul>
{% else %}
<p>There are no books in the library.</p>
{% endif %}
{% endblock %}